const basket=getBasket();let product_id,color_url;function defineUrlParam(){const t=new URL(location.href),e=new URLSearchParams(t.search);product_id=e.get("id"),color_url=e.get("color")}function insertProduct(t){document.querySelector("[data-product_name]").textContent=t.name,document.querySelector("[data-product_image]").setAttribute("src",t.imageUrl),document.querySelector("[data-product_description]").textContent=t.description,document.querySelector("[data-product_colors]").innerHTML=generateColorOptions(t.colors),document.querySelector("[data-product_price]").textContent=formatPrice(t.price),null!==color_url&&initNbProduct(color_url)}function generateColorOptions(t){return t.map(t=>'<option value="'+t+'" '+(t===color_url?'selected="selected"':"")+">"+t+"</option>").join()}function initNbProduct(t){const e=productGetInfos(product_id,t.value),o=void 0!==e?e.nb:1;document.querySelector("[name=product_numb]").value=o,document.querySelector("[data-product_price]").textContent=formatPrice(product_api.price*o),updateBtnAdd(void 0!==e?"update":"add")}function clickAddUpdateProduct(){const t=parseInt(document.getElementById("nb_product").value);if(t<1)return;const e={name:document.getElementById("colors").value,nb:t},o=basketAddOrUpdateProduct(product_api,e);animate_logo_basket(o),updateBtnAdd("update")}function updatePrice(){const t=document.getElementById("nb_product").value;document.querySelector("[data-product_price]").textContent=formatPrice(product_api.price*t)}function updateBtnAdd(t){document.getElementById("add-basket").textContent="update"===t?"Modifier le panier":"Ajouter au panier"}document.addEventListener("DOMContentLoaded",()=>{defineUrlParam(),getProduct(product_id).then(t=>{product_api=t,insertProduct(t),initNbProduct(document.querySelector("[name=colors]"))}).catch(t=>insertDivError(t)),loadPage("div-product__description"),document.getElementById("add-basket").addEventListener("click",()=>clickAddUpdateProduct(document.getElementById("div-product"))),document.querySelector("[name=colors]").addEventListener("change",function(){initNbProduct(this)});const t=document.getElementById("nb_product");t.addEventListener("change",()=>updatePrice()),t.addEventListener("input",function(){this.reportValidity()||(this.value=1)})});