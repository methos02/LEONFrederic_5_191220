function getBasket(){const t=localStorage.getItem("basket");return null!==t?JSON.parse(t):{nb_products:0,products:[]}}function emptyBasket(){localStorage.removeItem("basket"),updateBadgeBasket(0)}function updateBadgeBasket(t){const e=document.getElementById("nb_article");if(0===parseInt(t))return e.innerText="",void e.classList.add("empty-basket");e.innerText=t,e.classList.remove("empty-basket")}function getProductInBasket(t){return basket.products.find(e=>t===e.id)}function getIndexProductInBasket(t){return basket.products.findIndex(e=>t===e.id)}function basketAddOrUpdateProduct(t,e){const s=getIndexProductInBasket(t._id);return-1===s?(addSuccessToast("Votre nounours a bien été ajouté !"),basketAddProduct({id:t._id,colors:[e]})):(addSuccessToast("Votre panier a été modifié !"),basketUpdateProduct(e,s))}function basketAddProduct(t){return basket.products.push(t),saveBasket()}function basketUpdateProduct(t,e){return basket.products[e].colors=basketAddOrUpdateColor(basket.products[e],t),saveBasket()}function saveBasket(){return basket.nb_products=basket.products.reduce((t,e)=>{return t+e.colors.reduce((t,e)=>t+parseInt(e.nb),0)},0),localStorage.setItem("basket",JSON.stringify(basket)),basket.nb_products}function productGetInfos(t,e){const s=getProductInBasket(t);if(void 0!==s)return s.colors.find(t=>t.name===e)}function basketAddOrUpdateColor(t,e){const s=t.colors.findIndex(t=>t.name===e.name);return-1!==s?(t.colors[s]=e,t.colors):(t.colors.push(e),t.colors)}function localBasketRemoveProduct(t,e){const s=getIndexProductInBasket(t),o=basket.products[s];return 1===o.colors.length?(basket.products=basket.products.filter(e=>e.id!==t),saveBasket(basket)):(o.colors=o.colors.filter(t=>t.name!==e),saveBasket(basket))}